"use strict";(globalThis.webpackChunk_openmrs_esm_form_builder_app=globalThis.webpackChunk_openmrs_esm_form_builder_app||[]).push([[850],{41850:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(16072),a=n.n(r),i=n(53941),l=n(44906),o=n(84370),u=n(28504),s=n(92137),c=n(25987),d=n(43687),p=n(59324),m=n(77646),f=n(64945),v=n(56603),g=n(99130),y=n(91608);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){h(e,t,n[t])}))}return e}function T(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const k=function(e){var t,n,b,h,k,O,S,A,w,C,x,N,P,I,L,F,j,D,M,R,B,U,W,Q,_,K,z,H,V,$,Y=e.closeModal,J=e.onSchemaChange,G=e.pageIndex,X=e.questionIndex,Z=e.questionToEdit,ee=e.schema,te=e.sectionIndex,ne=(0,i.useTranslation)().t,re=(0,c.useConfig)(),ae=re.fieldTypes,ie=re.questionTypes,le=q((0,r.useState)(!1),2),oe=le[0],ue=le[1],se=q((0,r.useState)([]),2),ce=se[0],de=se[1],pe=q((0,r.useState)(Z.questionOptions.conceptMappings),2),me=pe[0],fe=pe[1],ve=q((0,r.useState)(""),2),ge=ve[0],ye=ve[1],be=q((0,r.useState)(""),2),he=be[0],Ee=be[1],Te=q((0,r.useState)(""),2),qe=Te[0],ke=Te[1],Oe=q((0,r.useState)(Z.questionOptions.rendering),2),Se=Oe[0],Ae=Oe[1],we=q((0,r.useState)(!1),2),Ce=we[0],xe=we[1],Ne=q((0,r.useState)(null!==(R=Z.questionOptions.max)&&void 0!==R?R:""),2),Pe=Ne[0],Ie=Ne[1],Le=q((0,r.useState)(null!==(B=Z.questionOptions.min)&&void 0!==B?B:""),2),Fe=Le[0],je=Le[1],De=q((0,r.useState)(""),2),Me=De[0],Re=De[1],Be=q((0,r.useState)(""),2),Ue=Be[0],We=Be[1],Qe=q((0,r.useState)(null),2),_e=Qe[0],Ke=Qe[1],ze=q((0,r.useState)(null!==(U=Z.datePickerFormat)&&void 0!==U?U:"both"),2),He=ze[0],Ve=ze[1],$e=q((0,r.useState)(""),2),Ye=$e[0],Je=$e[1],Ge=q((0,r.useState)([]),2),Xe=Ge[0],Ze=Ge[1],et=q((0,r.useState)(null),2),tt=et[0],nt=et[1],rt=(0,d.M)(ge),at=rt.concepts,it=rt.isLoadingConcepts,lt=(W=Z.questionOptions.concept,z="".concat(c.restBaseUrl,"/concept/").concat(W,"?v=").concat("custom:(name:(display))"),V=(H=(0,p.Ay)(W?z:null,c.openmrsFetch)).data,$=H.error,{conceptName:null!==(K=null==V||null===(_=V.data)||void 0===_||null===(Q=_.name)||void 0===Q?void 0:Q.display)&&void 0!==K?K:null,conceptNameLookupError:$,isLoadingConceptName:W&&!V&&!$||!1}),ot=lt.conceptName,ut=lt.conceptNameLookupError,st=lt.isLoadingConceptName,ct=(0,m.d)().patientIdentifierTypes,dt=(0,f.O)().personAttributeTypes,pt=function(e){var t,n="".concat(c.restBaseUrl,"/patientidentifiertype/").concat(e),r=(0,p.Ay)(e?n:null,c.openmrsFetch),a=r.data,i=r.error,l=r.isLoading;return{patientIdentifierType:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},conceptLookupError:i,isLoadingPatientIdentifierType:l}}(qe).patientIdentifierType,mt=function(e){var t,n="".concat(c.restBaseUrl,"/personattributetype?q=").concat(e,"&v=default"),r=(0,p.Ay)(e?n:null,c.openmrsFetch),a=r.data,i=r.error,l=r.isLoading;return{personAttributeType:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},personAttributeLookupError:i,isLoadingPersonAttributeType:l}}(he).personAttributeType,ft=q((0,r.useState)(pt),2),vt=ft[0],gt=ft[1],yt=q((0,r.useState)(mt),2),bt=yt[0],ht=yt[1],Et=function(e){var t,n,r="".concat(c.restBaseUrl,"/patientidentifiertype/").concat(e),a=(0,p.Ay)(e?r:null,c.openmrsFetch),i=a.data,l=a.error,o=a.isLoading;return{patientIdentifierName:null!==(n=null==i||null===(t=i.data)||void 0===t?void 0:t.name)&&void 0!==n?n:null,patientIdentifierNameLookupError:l,isLoadingPatientidentifierName:o||!1}}(Z.questionOptions.identifierType),Tt=Et.patientIdentifierNameLookupError,qt=Et.isLoadingPatientidentifierName,kt=function(e){var t,n,r="".concat(c.restBaseUrl,"/personattributetype?q=").concat(e,"&v=default"),a=(0,p.Ay)(e?r:null,c.openmrsFetch),i=a.data,l=a.error,o=a.isLoading;return{personAttributeName:null!==(n=null==i||null===(t=i.data)||void 0===t?void 0:t.name)&&void 0!==n?n:null,personAttributeNameLookupError:l,isLoadingPersonAttributeName:o||!1}}(Z.questionOptions.attributeType),Ot=kt.personAttributeNameLookupError,St=kt.isLoadingPersonAttributeName,At=q((0,r.useState)(!1),2),wt=At[0],Ct=At[1],xt=q((0,r.useState)([]),2),Nt=xt[0],Pt=xt[1],It=q((0,r.useState)(null),2),Lt=It[0],Ft=It[1],jt=q((0,r.useState)(null),2),Dt=jt[0],Mt=jt[1],Rt=(0,v.v5)(),Bt=Rt.programs,Ut=Rt.programsLookupError,Wt=Rt.isLoadingPrograms,Qt=(0,v.D0)(null==Dt?void 0:Dt.uuid),_t=Qt.programStates,Kt=Qt.programStatesLookupError,zt=Qt.isLoadingProgramStates,Ht=Qt.mutateProgramStates,Vt=q((0,r.useState)([]),2),$t=Vt[0],Yt=Vt[1],Jt=tt&&(null==Z?void 0:Z.questionOptions.concept)&&(null==Z||null===(t=Z.questionOptions)||void 0===t?void 0:t.concept)!==(null==tt?void 0:tt.uuid),Gt=q((0,r.useState)(!1),2),Xt=Gt[0],Zt=Gt[1],en=q((0,r.useState)(null==Z||null===(b=Z.questionOptions)||void 0===b||null===(n=b.toggleOptions)||void 0===n?void 0:n.labelTrue),2),tn=en[0],nn=en[1],rn=q((0,r.useState)(null==Z||null===(k=Z.questionOptions)||void 0===k||null===(h=k.toggleOptions)||void 0===h?void 0:h.labelFalse),2),an=rn[0],ln=rn[1],on={datetime:[{value:"both",label:ne("calendarAndTimer","Calendar and timer"),defaultChecked:!0}],date:[{value:"calendar",label:ne("calendarOnly","Calendar only"),defaultChecked:!1}],time:[{value:"timer",label:ne("timerOnly","Timer only"),defaultChecked:!1}]},un=(0,r.useMemo)((function(){return(0,l.A)((function(e){return ye(e)}),500)}),[]);return(0,r.useEffect)((function(){var e=Bt.find((function(e){return e.uuid===Z.questionOptions.programUuid}));Ft(e)}),[Bt,Z.questionOptions.programUuid]),(0,r.useEffect)((function(){var e=null==Lt?void 0:Lt.allWorkflows.find((function(e){return e.uuid===Z.questionOptions.workflowUuid}));Mt(e),Yt(null==Lt?void 0:Lt.allWorkflows)}),[Z.questionOptions.workflowUuid,Lt]),(0,r.useEffect)((function(){var e=null==Dt?void 0:Dt.states.filter((function(e){return Z.questionOptions.answers.some((function(t){return t.value===e.uuid}))}));Pt(e)}),[Dt,Z.questionOptions.answers]),a().createElement(a().Fragment,null,a().createElement(u.rQ0,{className:y.A.modalHeader,closeModal:Y,title:ne("editQuestion","Edit question")}),a().createElement(u.lVW,{className:y.A.form,onSubmit:function(e){return e.preventDefault()}},a().createElement(u.cwr,{hasScrollingContent:!0},a().createElement(u.BJc,{gap:5},a().createElement(u.ksK,{defaultValue:Z.label,id:Z.id,labelText:ne("questionLabel","Label"),onChange:function(e){return We(e.target.value)},required:!0}),a().createElement(u.ksK,{defaultValue:Z.id,id:"questionId",invalid:function(e){var t;if((null==Z?void 0:Z.id)===e)return!1;var n=null==ee||null===(t=ee.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,o.A)(n).includes(e)}(Me),invalidText:ne("questionIdExists","This question ID already exists in your schema"),labelText:ne("questionId","Question ID (prefer using camel-case for IDs). Each field should have a unique ID."),onChange:function(e){return Re(e.target.value)},placeholder:ne("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),a().createElement(u.zWQ,{defaultSelected:/true/.test(null==Z||null===(O=Z.required)||void 0===O?void 0:O.toString())?"required":"optional",name:"isQuestionRequired",legendText:ne("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},a().createElement(u.aaP,{id:"questionIsNotRequired",defaultChecked:!0,labelText:ne("optional","Optional"),onClick:function(){return xe(!1)},value:"optional"}),a().createElement(u.aaP,{id:"questionIsRequired",defaultChecked:!1,labelText:ne("required","Required"),onClick:function(){return xe(!0)},value:"required"})),a().createElement(u.l6P,{defaultValue:Z.type,onChange:function(e){return Ke(e.target.value)},id:"questionType",invalidText:ne("typeRequired","Type is required"),labelText:ne("questionType","Question type"),required:!0},!_e&&a().createElement(u.ebT,{text:ne("chooseQuestionType","Choose a question type"),value:""}),ie.map((function(e,t){return a().createElement(u.ebT,{text:e,value:e,key:t})}))),a().createElement(u.l6P,{defaultValue:Z.questionOptions.rendering,onChange:function(e){return Ae(e.target.value)},id:"renderingType",invalidText:ne("validFieldTypeRequired","A valid field type value is required"),labelText:ne("renderingType","Rendering type"),required:!0},!Se&&a().createElement(u.ebT,{text:ne("chooseRenderingType","Choose a rendering type"),value:""}),ae.map((function(e,t){return a().createElement(u.ebT,{text:e,value:e,key:t})}))),"number"===Se?a().createElement(a().Fragment,null,a().createElement(u.ksK,{id:"min",labelText:"Min",value:Fe||"",invalid:parseFloat(Fe)>parseFloat(Pe),invalidText:parseFloat(Fe)>parseFloat(Pe)?ne("invalidMinMax","Min value cannot be greater than max"):"",onChange:function(e){return je(e.target.value)},required:!0}),a().createElement(u.ksK,{id:"max",labelText:"Max",value:Pe||"",invalid:parseFloat(Fe)>parseFloat(Pe),invalidText:parseFloat(Fe)>parseFloat(Pe)?ne("invalidMinMax","Min value cannot be greater than max"):"",onChange:function(e){return Ie(e.target.value)},required:!0})):"textarea"===Se?a().createElement(u.ksK,{id:"textAreaRows",labelText:ne("rows","Rows"),value:Ye||"",onChange:function(e){return Je(e.target.value)},required:!0}):"toggle"===Se?a().createElement("div",null,a().createElement(u.ksK,{id:"lableTrue",labelText:ne("labelTrue","Label true"),value:ne(tn||""),onChange:function(e){return nn(e.target.value)},placeholder:ne("on","On"),required:!0}),a().createElement(u.ksK,{id:"lableFalse",labelText:ne("labelFalse","Label false"),value:ne(an||""),onChange:function(e){return ln(e.target.value)},placeholder:ne("off","Off"),required:!0})):null,"patientIdentifier"===Z.type&&a().createElement("div",null,a().createElement(u.lRv,{className:y.A.label},ne("searchForBackingPatientIdentifierType","Search for a backing patient identifier type")),Tt?a().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:ne("errorFetchingPatientIdentifierTypes","Error fetching patient identifier types"),subtitle:ne("pleaseTryAgain","Please try again.")}):null,qt?a().createElement(u.OuH,{className:y.A.loader,description:ne("loading","Loading")+"..."}):a().createElement(u.a32,{id:"patientIdentifierTypeLookup",items:ct,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t;t=e.selectedItem,ke(""),gt(t)},placeholder:ne("choosePatientIdentifierType","Choose a patient identifier type"),initialSelectedItem:ct.find((function(e){var t;return(null==e?void 0:e.uuid)===(null===(t=Z.questionOptions)||void 0===t?void 0:t.identifierType)}))})),"personAttribute"===Z.type&&a().createElement("div",null,a().createElement(u.lRv,{className:y.A.label},ne("searchForBackingPersonAttributeType","Search for a backing person attribute type")),Ot?a().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:ne("errorFetchingPersonAttributeTypes","Error fetching person attribute types"),subtitle:ne("pleaseTryAgain","Please try again.")}):null,St?a().createElement(u.OuH,{className:y.A.loader,description:ne("loading","Loading")+"..."}):a().createElement(u.a32,{id:"personAttributeTypeLookup",items:dt,itemToString:function(e){return null==e?void 0:e.display},onChange:function(e){var t;t=e.selectedItem,Ee(""),ht(t)},placeholder:ne("choosePersonAttributeType","Choose a person attribute type"),initialSelectedItem:dt.find((function(e){var t;return(null==e?void 0:e.uuid)===(null===(t=Z.questionOptions)||void 0===t?void 0:t.attributeType)}))})),"programState"===Z.type&&a().createElement(u.BJc,{gap:5},Wt&&a().createElement(u.aB4,null),Ut?a().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:ne("errorFetchingPrograms","Error fetching programs"),subtitle:ne("pleaseTryAgain","Please try again.")}):null,Bt&&a().createElement(u.a32,{id:"programLookup",items:Bt,itemToString:function(e){return null==e?void 0:e.name},onChange:function(e){var t;t=e.selectedItem,Ft(t),Yt(null==t?void 0:t.allWorkflows)},placeholder:ne("addProgram","Add program"),selectedItem:Lt,titleText:ne("program","Program")}),Lt&&a().createElement(u.a32,{id:"programWorkflowLookup",items:$t,itemToString:function(e){var t,n;return null!==(n=null==e||null===(t=e.concept)||void 0===t?void 0:t.display)&&void 0!==n?n:""},onChange:function(e){return t=e.selectedItem,Mt(t),void Ht();var t},placeholder:ne("addProgramWorkflow","Add program workflow"),selectedItem:Dt,titleText:ne("programWorkflow","Program workflow")}),Dt&&a().createElement(a().Fragment,null,zt&&a().createElement(u.aB4,null),Kt&&a().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:ne("errorFetchingProgramState","Error fetching program state"),subtitle:ne("pleaseTryAgain","Please try again.")}),(null==_t?void 0:_t.length)>0&&a().createElement(u.KFt,{titleText:ne("programState","Program state"),id:"programState",items:_t,itemToString:function(e){var t;return e?null==e||null===(t=e.concept)||void 0===t?void 0:t.display:""},selectionFeedback:"top-after-reopen",onChange:function(e){return Pt(e.selectedItems)},selectedItems:Nt}),a().createElement("div",null,null==Nt?void 0:Nt.map((function(e){var t;return a().createElement(u.vwO,{className:y.A.tag,key:null==e?void 0:e.uuid,type:"blue"},null==e||null===(t=e.concept)||void 0===t?void 0:t.display)}))))),"ui-select-extended"!==Se&&"encounterDatetime"!==Z.type&&("obs"===_e||!_e&&"obs"===Z.type)&&a().createElement(a().Fragment,null,a().createElement("div",null,a().createElement(u.lRv,{className:y.A.label},ne("searchForBackingConcept","Search for a backing concept")),ut?a().createElement(u.jeF,{kind:"error",lowContrast:!0,className:y.A.error,title:ne("errorFetchingConceptName","Couldn't resolve concept name"),subtitle:ne("conceptDoesNotExist","The linked concept '{{conceptName}}' does not exist in your dictionary",{conceptName:Z.questionOptions.concept})}):null,st?a().createElement(u.OuH,{className:y.A.loader,description:ne("loading","Loading")+"..."}):a().createElement(a().Fragment,null,a().createElement(u.vji,{defaultValue:ot,id:"conceptLookup",onClear:function(){nt(null),Ve("both")},onChange:function(e){var t,n;(n=null===(t=e.target.value)||void 0===t?void 0:t.trim())&&un(n)},placeholder:ne("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:null==tt?void 0:tt.display}),ge?it?a().createElement(u.OuH,{className:y.A.loader,description:ne("searching","Searching")+"..."}):(null==at?void 0:at.length)&&!it?a().createElement("ul",{className:y.A.conceptList},null==at?void 0:at.map((function(e,t){return a().createElement("li",{role:"menuitem",className:y.A.concept,key:t,onClick:function(){return function(e){var t,n,r,a=(0,g.getDatePickerType)(e);a&&Ve(a),ye(""),Ze([]),nt(e),fe(null==e||null===(t=e.mappings)||void 0===t?void 0:t.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}}))),de(null!==(r=null==e||null===(n=e.answers)||void 0===n?void 0:n.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}})))&&void 0!==r?r:[])}(e)}},e.display)}))):a().createElement(u.Wdr,null,a().createElement(u.FAs,{className:y.A.emptyResults},a().createElement("span",null,ne("noMatchingConcepts","No concepts were found that match")," ",a().createElement("strong",null,'"',ge,'".'))),a().createElement("div",{className:y.A.oclLauncherBanner},a().createElement("p",{className:y.A.bodyShort01},ne("conceptSearchHelpText","Can't find a concept?")),a().createElement("a",{className:y.A.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},ne("searchInOCL","Search in OCL"),a().createElement(s.F1,{size:16})))):null)),a().createElement(u.BJc,{gap:5},!Jt&&(null==Z||null===(S=Z.questionOptions.answers)||void 0===S?void 0:S.length)&&"programState"!==Z.type?a().createElement(u.KFt,{className:y.A.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},initialSelectedItems:null==Z||null===(w=Z.questionOptions)||void 0===w||null===(A=w.answers)||void 0===A?void 0:A.map((function(e){return{id:e.concept,text:e.label}})),items:null==Z||null===(x=Z.questionOptions)||void 0===x||null===(C=x.answers)||void 0===C?void 0:C.map((function(e){var t;return{id:e.concept,text:null!==(t=e.label)&&void 0!==t?t:""}})),onChange:function(e){var t=e.selectedItems;ue(!0),Ze(t.sort())},size:"md",titleText:ne("selectAnswersToDisplay","Select answers to display")}):null,Jt||!(null==Z||null===(P=Z.questionOptions)||void 0===P||null===(N=P.answers)||void 0===N?void 0:N.length)||oe||"programState"===Z.type?null:a().createElement("div",null,null==Z||null===(L=Z.questionOptions)||void 0===L||null===(I=L.answers)||void 0===I?void 0:I.map((function(e){return a().createElement(u.vwO,{className:y.A.tag,key:null==e?void 0:e.concept,type:"blue"},null==e?void 0:e.label)}))),Jt&&ce.length?a().createElement(u.KFt,{className:y.A.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:ce.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return Ze(t.sort())},size:"md",titleText:ne("selectAnswersToDisplay","Select answers to display")}):null,(null!=Jt?Jt:oe)&&a().createElement("div",null,Xe.map((function(e){return a().createElement(u.vwO,{className:y.A.tag,key:e.id,type:"blue"},e.text)}))),a().createElement(u.zWQ,{defaultSelected:/true/.test(null==Z||null===(j=Z.questionOptions)||void 0===j||null===(F=j.showComment)||void 0===F?void 0:F.toString())?"yes":"no",name:"addObsComment",legendText:ne("addObsCommentTextBox","Add obs comment text box")},a().createElement(u.aaP,{id:"obsCommentYes",defaultChecked:!0,labelText:ne("yes","Yes"),onClick:function(){return Ct(!0)},value:"yes"}),a().createElement(u.aaP,{id:"obsCommentNo",defaultChecked:!1,labelText:ne("no","No"),onClick:function(){return Ct(!1)},value:"no"})),a().createElement(u.zWQ,{defaultSelected:/true/.test(null==Z||null===(M=Z.questionOptions)||void 0===M||null===(D=M.showDate)||void 0===D?void 0:D.toString())?"yes":"no",name:"addInlineDate",legendText:ne("addInlineDate","Add inline date")},a().createElement(u.aaP,{id:"inlineDateYes",defaultChecked:!0,labelText:ne("yes","Yes"),onClick:function(){return Zt(!0)},value:"yes"}),a().createElement(u.aaP,{id:"inlineDateNo",defaultChecked:!1,labelText:ne("no","No"),onClick:function(){return Zt(!1)},value:"no"})))),"date"===Se||"datetime"===Se?a().createElement(u.zWQ,{name:"datePickerType",legendText:ne("datePickerType","The type of date picker to show")},tt&&tt.datatype?on[tt.datatype.name.toLowerCase()].map((function(e){return a().createElement(u.aaP,{id:e.value,labelText:e.label,onClick:function(){return Ve(e.value)},checked:He===e.value,value:e.value})})):Object.values(on).flat().map((function(e){return a().createElement(u.aaP,{id:e.value,checked:He===e.value,labelText:e.label,onClick:function(){return Ve(e.value)},value:e.value})}))):null)),a().createElement(u.jlY,null,a().createElement(u.$nd,{onClick:Y,kind:"secondary"},ne("cancel","Cancel")),a().createElement(u.$nd,{onClick:function(){!function(e){var t,n,r;r=!Jt&&(null==Xe?void 0:Xe.length)?Xe.map((function(e){return{concept:e.id,label:e.text}})):Jt&&0===ce.length?[]:Jt&&(null==ce?void 0:ce.length)>0&&(null==Xe?void 0:Xe.length)?(null==Xe?void 0:Xe.length)?Xe.map((function(e){return{concept:e.id,label:e.text}})):Z.questionOptions.answers:"programState"===Z.type?Nt.map((function(e){return{value:e.uuid,label:e.concept.display}})):Z.questionOptions.answers;try{var a,i=T(E({label:Ue||Z.label,type:_e||Z.type,required:Ce||/true/.test(null==Z||null===(a=Z.required)||void 0===a?void 0:a.toString()),id:Me||Z.id},(Se&&("date"===Se||"datetime"===Se)||"date"===Z.questionOptions.rendering||"datetime"===Z.questionOptions.rendering)&&{datePickerFormat:He}),{questionOptions:E(T(E(T(E({rendering:Se||Z.questionOptions.rendering},Fe&&{min:Fe},Pe&&{max:Pe},(tt||Z.questionOptions.concept)&&{concept:tt?tt.uuid:Z.questionOptions.concept,conceptMappings:(null==me?void 0:me.length)?me:Z.questionOptions.conceptMappings}),{answers:r}),"patientIdentifier"===_e&&{identifierType:vt?vt.uuid:Z.questionOptions.identifierType},wt&&{showComment:wt||/true/.test(Z.questionOptions.showComment.toString())},Xt&&{showDate:Xt||/true/.test(Z.questionOptions.showDate.toString())}),{attributeType:bt?bt.uuid:Z.questionOptions.attributeType}),Lt&&{programUuid:Lt.uuid},Dt&&{workflowUuid:Dt.uuid},"toggle"===Se&&{toggleOptions:{labelTrue:tn,labelFalse:an}})});ee.pages[G].sections[te].questions[e]=i,J(E({},ee)),We(""),Re(""),xe(!1),Ke(null),Ae(null),nt(null),fe([]),Ze([]),Ct(!1),Zt(!1),(0,c.showSnackbar)({title:ne("questionEdited","Question edited"),kind:"success",isLowContrast:!0,subtitle:ne("questionEditedMessage",'The question labelled "{{- questionLabel}}" has been edited.',{questionLabel:Z.label})})}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&(0,c.showSnackbar)({title:ne("errorUpdatingQuestion","Error updating question"),kind:"error",subtitle:null==e?void 0:e.message})}Y()}(X)}},a().createElement("span",null,ne("save","Save"))))))}},44906:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(23149),a=n(41917);const i=function(){return a.A.Date.now()};var l=/\s/;var o=/^\s+/;const u=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&l.test(e.charAt(t)););return t}(e)+1).replace(o,""):e};var s=n(88496),c=n(53098);var d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,f=parseInt;const v=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||(0,c.A)(e)&&"[object Symbol]"==(0,s.A)(e)}(e))return NaN;if((0,r.A)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.A)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var n=p.test(e);return n||m.test(e)?f(e.slice(2),n?2:8):d.test(e)?NaN:+e};var g=Math.max,y=Math.min;const b=function(e,t,n){var a,l,o,u,s,c,d=0,p=!1,m=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=a,r=l;return a=l=void 0,d=t,u=e.apply(r,n)}function h(e){var n=e-c;return void 0===c||n>=t||n<0||m&&e-d>=o}function E(){var e=i();if(h(e))return T(e);s=setTimeout(E,function(e){var n=t-(e-c);return m?y(n,o-(e-d)):n}(e))}function T(e){return s=void 0,f&&a?b(e):(a=l=void 0,u)}function q(){var e=i(),n=h(e);if(a=arguments,l=this,c=e,n){if(void 0===s)return function(e){return d=e,s=setTimeout(E,t),p?b(e):u}(c);if(m)return clearTimeout(s),s=setTimeout(E,t),b(c)}return void 0===s&&(s=setTimeout(E,t)),u}return t=v(t)||0,(0,r.A)(n)&&(p=!!n.leading,o=(m="maxWait"in n)?g(v(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),q.cancel=function(){void 0!==s&&clearTimeout(s),d=0,a=c=l=s=void 0},q.flush=function(){return void 0===s?u:T(i())},q}},23149:(e,t,n)=>{n.d(t,{A:()=>r});const r=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}}]);